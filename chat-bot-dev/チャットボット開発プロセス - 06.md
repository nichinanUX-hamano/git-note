---
date: 2025-07-21
tags:
  - å–¶æ¥­
  - API
Gemini: https://g.co/gemini/share/33ba7deb7ae8
release: https://g.co/gemini/share/0b37e90a6003
---
## Webå®Ÿè£…ï¼ˆãƒ†ã‚¹ãƒˆï¼‰

ã“ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«å®Ÿè£…ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã¯ã€å¤§ããåˆ†ã‘ã¦2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ã€‚

1. **æœ€ã‚‚æ‰‹è»½ã§è¿…é€Ÿãªæ–¹æ³•:** Pythonã ã‘ã§UIã¾ã§æ§‹ç¯‰ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†
    
2. **æ¨™æº–çš„ã§æŸ”è»Ÿãªæ–¹æ³•:** ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’åˆ†é›¢ã—ã¦æ§‹ç¯‰ã™ã‚‹
    

ä»Šå›ã¯ã€ãã‚Œãã‚Œã®ãƒ•ãƒ­ãƒ¼ã‚’ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«èª¬æ˜ã—ã¾ã™ã€‚

---

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1: Streamlitã‚„Gradioã‚’ä½¿ã†ï¼ˆè¿…é€Ÿãªãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å‘ã‘ï¼‰

ã“ã®æ–¹æ³•ã¯ã€Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’ã»ã¨ã‚“ã©å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€ç°¡å˜ãªWeb UIã‚’ã™ãã«ä½œæˆã§ãã‚‹ãŸã‚ã€ãƒ‡ãƒ¢ã‚„ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦éå¸¸ã«é©ã—ã¦ã„ã¾ã™ã€‚

**ãƒ•ãƒ­ãƒ¼:**

#### ã‚¹ãƒ†ãƒƒãƒ—1: å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Streamlitã¾ãŸã¯Gradioã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

Bash

```
pip install streamlit # ã¾ãŸã¯ pip install gradio
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´

ã“ã‚Œã¾ã§ã® `chat_bot.py` ã®ã‚³ãƒ¼ãƒ‰ã‚’ã€Streamlitã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¾ã™ã€‚

**`app.py` ï¼ˆStreamlitã®ä¾‹ï¼‰**

Python

```
# app.py

import os
from dotenv import load_dotenv
import streamlit as st
# ä»–ã®å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from langchain_community.document_loaders import DirectoryLoader, UnstructuredFileLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_google_genai import GoogleGenerativeAIEmbeddings, ChatGoogleGenerativeAI
from langchain_community.vectorstores import Chroma
from langchain.chains import RetrievalQA
from langchain_core.prompts import PromptTemplate

# 1. ç’°å¢ƒå¤‰æ•°ã®ãƒ­ãƒ¼ãƒ‰
load_dotenv()
google_api_key = os.getenv("GOOGLE_API_KEY")
if not google_api_key:
    st.error("GOOGLE_API_KEY not found in .env file.")
    st.stop()

# 2. ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒ¼ãƒ‰
vector_db_path = "./vector_db_data"
@st.cache_resource
def get_vectorstore():
    embeddings_model = GoogleGenerativeAIEmbeddings(model="models/embedding-001", google_api_key=google_api_key)
    return Chroma(persist_directory=vector_db_path, embedding_function=embeddings_model)

# 3. LLMã¨RAGãƒã‚§ãƒ¼ãƒ³ã®åˆæœŸåŒ–
@st.cache_resource
def get_qa_chain():
    llm = ChatGoogleGenerativeAI(model="gemini-1.5-flash", temperature=0.3, google_api_key=google_api_key)
    vectorstore = get_vectorstore()
    retriever = vectorstore.as_retriever(search_kwargs={"k": 3})

    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®šç¾©
    prompt_template = """... (ä¸Šè¨˜åŒæ§˜ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ) ..."""
    PROMPT = PromptTemplate(template=prompt_template, input_variables=["context", "question"])

    return RetrievalQA.from_chain_type(
        llm=llm,
        chain_type="stuff",
        retriever=retriever,
        return_source_documents=True,
        chain_type_kwargs={"prompt": PROMPT}
    )

# 4. Streamlit UI
st.title("NotebookLM è³‡æ–™ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ")
qa_chain = get_qa_chain()

# ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã«ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‚’ä¿å­˜
if "messages" not in st.session_state:
    st.session_state.messages = []

# éå»ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        st.markdown(message["content"])

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘ä»˜ã‘
if prompt := st.chat_input("è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"):
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«è¿½åŠ 
    st.session_state.messages.append({"role": "user", "content": prompt})
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’UIã«è¡¨ç¤º
    with st.chat_message("user"):
        st.markdown(prompt)

    # AIã®å›ç­”ã‚’ç”Ÿæˆ
    with st.chat_message("assistant"):
        with st.spinner("å›ç­”ã‚’ç”Ÿæˆä¸­..."):
            result = qa_chain.invoke({"query": prompt})
            response = result["result"]
            st.markdown(response)
            
            # å‚ç…§å…ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¡¨ç¤º
            st.markdown("---")
            st.markdown("**å‚ç…§å…ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**")
            for i, doc in enumerate(result.get("source_documents", [])):
                st.markdown(f"- **{doc.metadata.get('source', 'ä¸æ˜ãªã‚½ãƒ¼ã‚¹')}**")

    # AIã®å›ç­”ã‚’ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«è¿½åŠ 
    st.session_state.messages.append({"role": "assistant", "content": response})

```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒèµ·å‹•ã—ã¾ã™ã€‚

Bash

```
streamlit run app.py
```

ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ã—ãŸURLï¼ˆé€šå¸¸ `http://localhost:8501`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°ã€ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§åˆ©ç”¨ã§ãã¾ã™ã€‚

---

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’åˆ†é›¢ï¼ˆæ¨™æº–çš„ãªæ–¹æ³•ï¼‰

ã“ã®æ–¹æ³•ã¯ã€ã‚ˆã‚ŠæŸ”è»Ÿãªè¨­è¨ˆã¨æ‹¡å¼µæ€§ã‚’æŒã¡ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã®é‹ç”¨ã«é©ã—ã¦ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPythonï¼‰ãŒAPIã¨ã—ã¦æ©Ÿèƒ½ã—ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆHTML/CSS/JSï¼‰ãŒãã®APIã‚’å‘¼ã³å‡ºã™å½¢ã§ã™ã€‚

**ãƒ•ãƒ­ãƒ¼:**

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®æ§‹ç¯‰ (Flask/FastAPI)

`chat_bot.py` ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¦JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™Web APIã¨ã—ã¦ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚

**`api.py` ï¼ˆFlaskã®ä¾‹ï¼‰**

Python

```
# pip install Flask
from flask import Flask, request, jsonify
import os
from dotenv import load_dotenv
# ... ä»–ã®å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ...

# 1. ç’°å¢ƒå¤‰æ•°ã®ãƒ­ãƒ¼ãƒ‰
load_dotenv()
google_api_key = os.getenv("GOOGLE_API_KEY")

# 2. ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€LLMã€QAãƒã‚§ãƒ¼ãƒ³ã®åˆæœŸåŒ–
# ã“ã®åˆæœŸåŒ–å‡¦ç†ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•æ™‚ã«ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ãŠã
vector_db_path = "./vector_db_data"
embeddings_model = ...
vectorstore = Chroma(persist_directory=vector_db_path, embedding_function=embeddings_model)
llm = ...
qa_chain = RetrievalQA.from_chain_type(...)

# 3. Flaskã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ
app = Flask(__name__)

# 4. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®šç¾©
@app.route("/ask", methods=["POST"])
def ask_question():
    data = request.get_json()
    user_query = data.get("query")

    if not user_query:
        return jsonify({"error": "No query provided"}), 400

    try:
        result = qa_chain.invoke({"query": user_query})
        response = {
            "answer": result["result"],
            "source_documents": [doc.metadata.get("source", "N/A") for doc in result.get("source_documents", [])]
        }
        return jsonify(response)
    except Exception as e:
        return jsonify({"error": str(e)}), 500

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
if __name__ == "__main__":
    app.run(debug=True, host="0.0.0.0", port=5000)

```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®æ§‹ç¯‰ (HTML/CSS/JS)

ã‚·ãƒ³ãƒ—ãƒ«ãªHTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€JavaScriptã§ä¸Šè¨˜ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«`POST`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

**`index.html`**

HTML

```
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ</title>
    <style>/* ã‚¹ã‚¿ã‚¤ãƒ«ã¯çœç•¥ */</style>
</head>
<body>
    <div id="chat-container">
        <div id="messages"></div>
        <form id="chat-form">
            <input type="text" id="user-input" placeholder="è³ªå•ã‚’å…¥åŠ›..." />
            <button type="submit">é€ä¿¡</button>
        </form>
    </div>
    <script>
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const messagesContainer = document.getElementById('messages');

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const query = userInput.value;
            if (!query) return;

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            messagesContainer.innerHTML += `<div class="user-message">ã‚ãªãŸ: ${query}</div>`;

            // APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
            const response = await fetch('/ask', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ query: query })
            });

            const data = await response.json();
            
            // AIã®å›ç­”ã‚’è¡¨ç¤º
            if (response.ok) {
                messagesContainer.innerHTML += `<div class="ai-message">AI: ${data.answer}</div>`;
                // ã‚½ãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚è¡¨ç¤º
            } else {
                messagesContainer.innerHTML += `<div class="error-message">ã‚¨ãƒ©ãƒ¼: ${data.error}</div>`;
            }
            userInput.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        });
    </script>
</body>
</html>
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: å®Ÿè¡Œã¨ãƒ‡ãƒ—ãƒ­ã‚¤

Flaskã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¯ã€Dockerã‚³ãƒ³ãƒ†ãƒŠåŒ–ã—ã¦Google Cloud Runãªã©ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆ©ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

### ã©ã¡ã‚‰ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸ã¶ã¹ãã‹ï¼Ÿ

||**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1ï¼ˆStreamlit/Gradioï¼‰**|**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ2ï¼ˆFlask/FastAPIï¼‰**|
|---|---|---|
|**é–‹ç™ºé€Ÿåº¦**|éå¸¸ã«é€Ÿã„|å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹|
|**å­¦ç¿’ã‚³ã‚¹ãƒˆ**|ä½ã„ï¼ˆPythonã®ã¿ï¼‰|ä¸­ï¼ˆPython+JS+Webã®åŸºç¤ï¼‰|
|**æŸ”è»Ÿæ€§**|é™å®šçš„ï¼ˆUIã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé›£ã—ã„ï¼‰|é«˜ã„ï¼ˆè‡ªç”±ã«ãƒ‡ã‚¶ã‚¤ãƒ³å¯èƒ½ï¼‰|
|**ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**|é™å®šçš„|é«˜ã„|
|**ç”¨é€”**|ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã€ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã€ãƒ‡ãƒ¢|æœ¬ç•ªç’°å¢ƒã®Webã‚µãƒ¼ãƒ“ã‚¹|

ã¾ãšã¯**Streamlit**ã‚’ä½¿ã£ã¦ã€æ‰‹è»½ã«å‹•ä½œç¢ºèªã‚’ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãã®å¾Œã€å¿…è¦ã«å¿œã˜ã¦Flaskã‚„FastAPIã‚’ä½¿ã£ãŸæœ¬æ ¼çš„ãªã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»è¡Œã™ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚


---
## **æŠ€è¡“çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸€è¦§**
### **ğŸ–¥ï¸ ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ç”¨ Web UI**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**Streamlit**|Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã ã‘ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãª Web ã‚¢ãƒ—ãƒªã‚’å³æ™‚æ§‹ç¯‰ã§ãã‚‹ OSSã€‚streamlit run app.py ã§ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ã€‚|
|**Gradio**|æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚„ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®ãƒ‡ãƒ¢ UI ã‚’æ•°è¡Œã§ä½œã‚Œã‚‹ Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã§å…±æœ‰ã‚‚å®¹æ˜“ã€‚|

---

### **ğŸ”™ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ Web API**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**Flask**|è»½é‡ WSGI ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚@app.route ã§ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®šç¾©ã—ã€JSON ã‚’è¿”ã™ API ã‚’è¿…é€Ÿã«æ§‹ç¯‰ã€‚|
|**FastAPI**|Python 3.7+ ã®å‹ãƒ’ãƒ³ãƒˆã‚’æ´»ç”¨ã—ã€é«˜æ€§èƒ½ãª ASGI API ã‚’å®£è¨€çš„ã«è¨˜è¿°ã§ãã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã‚‚ç‰¹å¾´ã€‚|
|**HTTP POST / JSON**|ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒ API ã«ãƒ‡ãƒ¼ã‚¿ (query) ã‚’é€ä¿¡ã—ã€ã‚µãƒ¼ãƒãƒ¼ãŒ JSON å½¢å¼ã§å›ç­”ã¨å‚ç…§æ–‡æ›¸ã‚’è¿”ã™é€šä¿¡æ–¹å¼ã€‚|

---

### **ğŸ› ï¸ LangChain & é–¢é€£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**LangChain**|LLM ã¨æ¤œç´¢ãƒ»ãƒ¡ãƒ¢ãƒªãƒ»ãƒ„ãƒ¼ãƒ«é€£æºã‚’æŠ½è±¡åŒ–ã™ã‚‹ OSSã€‚ãƒã‚§ãƒ¼ãƒ³æ§‹ç¯‰ã§ RAG ã‚’ç°¡ç´ åŒ–ã€‚|
|**RetrievalQA**|LangChain æ—¢æˆãƒã‚§ãƒ¼ãƒ³ã€‚Retriever ã§å–å¾—ã—ãŸæ–‡æ›¸ï¼‹è³ªå•ã‚’ LLM ã«æ¸¡ã—ã€æ ¹æ‹ ä»˜ãå›ç­”ã‚’ç”Ÿæˆã€‚|
|**PromptTemplate**|{context} ã¨ {question} ãªã©ã®å¤‰æ•°ã‚’æŒ¿å…¥ã§ãã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé››å½¢ã‚¯ãƒ©ã‚¹ã€‚|
|**GoogleGenerativeAIEmbeddings**|Gemini åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«ã‚’å‘¼ã³å‡ºã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤šæ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹ LangChain ãƒ©ãƒƒãƒ‘ãƒ¼ã€‚|
|**ChatGoogleGenerativeAI**|Gemini LLM ã‚’ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§åˆ©ç”¨ã™ã‚‹ LangChain ã‚¯ãƒ©ã‚¹ã€‚æ¸©åº¦ã‚„ãƒ¢ãƒ‡ãƒ«åã‚’æŒ‡å®šã€‚|
|**Chroma**|ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜å‹ã®è»½é‡ãƒ™ã‚¯ãƒˆãƒ« DBã€‚persist_directory ã§æ°¸ç¶šåŒ–ï¼å†ãƒ­ãƒ¼ãƒ‰ãŒå¯èƒ½ã€‚|
|**RecursiveCharacterTextSplitter**|æ–‡å­—æ•°ã¨é‡è¤‡ç‡ã‚’æŒ‡å®šã—ã€é•·æ–‡ã‚’ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚|

---

### **ğŸ” ç’°å¢ƒè¨­å®šãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**dotenv / load_dotenv**|.env ã‹ã‚‰ GOOGLE_API_KEY ãªã©ã®ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã‚€ Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚|
|**pip**|pip install streamlit ãªã©ã§ Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å–å¾—ãƒ»ç®¡ç†ã™ã‚‹æ¨™æº–ãƒ„ãƒ¼ãƒ«ã€‚|

---

### **ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**HTML / CSS / JavaScript**|Flask API ã‚’å‘¼ã³å‡ºã™ UI ã‚’æ‰‹å‹•ã§å®Ÿè£…ã™ã‚‹æ¨™æº– Web æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€‚|
|**Fetch API**|JS ã®çµ„è¾¼ã¿é–¢æ•°ã€‚fetch('/ask', {method:'POST', body:JSON.stringify({...})}) ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API ã¨é€šä¿¡ã€‚|

---

### **â˜ï¸ ãƒ‡ãƒ—ãƒ­ã‚¤ & ã‚³ãƒ³ãƒ†ãƒŠ**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**Docker**|ã‚¢ãƒ—ãƒªã¨ä¾å­˜é–¢ä¿‚ã‚’ä¸€ã¤ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã€ç’°å¢ƒå·®ç•°ãªãå®Ÿè¡Œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã€‚|
|**Google Cloud Run**|Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã§è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ï¼HTTPS å…¬é–‹ã§ãã‚‹ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å®Ÿè¡ŒåŸºç›¤ã€‚|

---

### **âš™ï¸ ãã®ä»–å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ**

|**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**|**æ¦‚è¦**|
|---|---|
|**@st.cache_resource**|Streamlit ã§é‡ã„åˆæœŸåŒ–ï¼ˆãƒ™ã‚¯ãƒˆãƒ« DB ãƒ­ãƒ¼ãƒ‰ãªã©ï¼‰ã‚’ä¸€åº¦ã ã‘å®Ÿè¡Œã—ã€çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã€‚|
|**search_kwargs={â€œkâ€: 3}**|Retriever ãŒè¿”ã™é–¢é€£ãƒãƒ£ãƒ³ã‚¯æ•°ã‚’æŒ‡å®šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚å›ç­”å“è³ªã¨é€Ÿåº¦ã‚’èª¿æ•´ã€‚|